$(function(){var i={type:"",price:"",style:"",license:"",minimum:0,maximum:128};$("#search-filters").on("change","input, select",function(){var e=$(this),a=$("#search-filters").serializeObject(),t={name:e.attr("name"),value:e.val()};$.each(a,function(e,t){a[e]==i[e]?(Cookies.remove(e),delete a[e]):"q"!=e&&Cookies.set(e,t)}),$(window).scrollTop(0),$("#search-results").html(templates.render("search/_loading.html")),$.get("/ajax/search/",a,function(e){$("#search-results").replaceWith(e),$(window).trigger("scroll"),$('#search-results [data-toggle="tooltip"]').tooltip()}),tracking.track("event",{category:"Settings",action:"Filter "+t.name,label:t.value}),$('.search-form [type="hidden"]').remove(),$.each(a,function(e,t){"q"!=e&&$("<input />",{type:"hidden",name:e,value:t}).appendTo(".search-form")}),history.pushState(a,null,"?"+$.param(a))}),$('[data-toggle="reset-filters"]').on("click",function(){$.each(i,function(e){Cookies.remove(e)})}),$(document).on("click","[data-filter]",function(){var e=$(this).data();$("#search-filters").find('[name="'+e.filter+'"][value="'+e.value+'"]').click(),$('[data-toggle="tooltip"]').tooltip("hide")}),$(document).on("click",'[data-trigger="more-premium"]',function(){var e=$(this),t=$(".premium-teaser"),a=$(".premium-teaser .icon-preview");t.addClass("expanded"),e.siblings('[data-filter="price"]').removeClass("d-none"),e.remove(),a.show();var i=Math.floor(t.width()/a.width()),r=Math.floor(a.length/i)*i;a.eq(r-1).nextAll(".icon-preview").hide()}),$(".size-picker").on("click",".dropdown-item",function(e){e.preventDefault();var t=$(this),a=t.parents(".size-picker").find(".dropdown-toggle"),i=t.attr("href").replace("#","");a.text(i+"px"),$("#search-results").removeAttr("class").addClass("size-"+i),$('#search-filters [name="maximum"]').val(i).trigger("change")}),$(document).on("click",".continuous_pagination .pagination .page-item:not(.disabled)",function(e){var t=$(this).find("a"),a=t.attr("href"),i=$.url(a).param(),r=parseInt(t.text());0<r&&(i.page=r-1),t.attr("href","/ajax/search/?"+$.param(i))}),$(document).on("click",".icon-preview a",function(){var e=$(this);if("all-sizes"!=e.data("toggle")){var t=e.parents(".icon-preview"),a=t.hasClass("premium"),i=$("#search-results .icon-preview"),r=i.not(".premium"),o=i.filter(".premium"),n=a?".icon-preview.premium":".icon-preview",s=t.index(n)+1;tracking.track("event",{category:"Search results",action:{"add-cart":"Add icon to cart",download:"Download icon","icon-details":"Open icon details",flag:"Open flag icon modal",bookmark:"Open bookmark icon modal"}[e.data("action")]||"Not set",label:"Position in results",value:s,properties:{icon_id:t.data("asset-id"),result_position:s,icons_count:a?o.length:r.length,premium:a,algorithm:$("#search-results").data("algorithm")}})}})});